<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FC24 Pack Opener</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <h1>Pack Opener</h1>
    <button id="show-image-button" onclick="startCooldown()">Open Pack</button>
    <a href="fc24club.html" id="view-images-button">Club</a> <!-- Updated View Images Link -->
    <div id="image-container">
        <img id="displayed-image" src="" alt="Image will appear here">
    </div>

    <script>
        let buttonCooldown = false;
        let storedImages = [];

        // Function to load stored images from localStorage
        function loadStoredImages() {
            const storedImagesJSON = localStorage.getItem('storedImages');
            if (storedImagesJSON) {
                storedImages = JSON.parse(storedImagesJSON);
            }
        }

        // Function to save stored images to localStorage
        function saveStoredImages() {
            localStorage.setItem('storedImages', JSON.stringify(storedImages));
        }

        // Load stored images when the page loads
        loadStoredImages();

        // Function to create confetti elements
        function createConfetti() {
            const confettiCount = 50; // Adjust the number of confetti particles as needed
            const imageContainer = document.getElementById('image-container');
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 100}%`;
                imageContainer.appendChild(confetti);
            }

            // Remove confetti elements after 2 seconds
            setTimeout(() => {
                const confettiElements = document.querySelectorAll('.confetti');
                confettiElements.forEach((confetti) => {
                    confetti.remove();
                });
            }, 2000); // Adjust the time to match the duration of the confetti animation
        }

        // Define image categories and their rarity percentages (your existing image categories)

        const imageCategories = [
            { category: 'Common Gold', rarity: 80 },
            { category: 'Rare Gold', rarity: 13 },
            { category: 'Nike Ready', rarity: 6.7 },
            { category: 'Icon', rarity: 0.3 }
        ];

        // Define a mapping of category names to arrays of file paths
        const categoryFilePaths = {
            'Common Gold': ['Cards/Golds/Neymar.png', ],
            'Rare Gold': ['Cards/Golds/Mbappe.png', 'Cards/Golds/Rodri.png', 'Cards/Golds/Kane.png'],
            'Nike Ready': ['Cards/Nike Ready/Alexia.jpeg', 'Cards/Nike Ready/Chiesa.jpeg', 'Cards/Nike Ready/Enzo.jpeg', 'Cards/Nike Ready/ Kerr.jpeg', 'Cards/Nike Ready/VVD.jpeg'],
            'Icon': ['Cards/Icons/R9.png']
        };

        // Function to select a random category based on rarity percentages
        function selectRandomCategory() {
            const rand = Math.random() * 100;
            let cumulativeProbability = 0;
            
            for (const category of imageCategories) {
                cumulativeProbability += category.rarity;
                if (rand <= cumulativeProbability) {
                    return category;
                }
            }
        }

        // Function to select a random image from the selected category
        function selectRandomImage(category) {
            const images = categoryFilePaths[category];
            if (images && images.length > 0) {
                const randomIndex = Math.floor(Math.random() * images.length);
                return images[randomIndex];
            }
            return null;
        }

        // Function to display a random image from the selected category
        function showRandomImage() {
            // Hide the card immediately
            document.getElementById('displayed-image').style.display = 'none';

            // Create and append confetti elements
            createConfetti();

            // After the confetti animation, display the card after 2 seconds (your existing code)
            setTimeout(() => {
                const selectedCategory = selectRandomCategory();
                const selectedImage = selectRandomImage(selectedCategory.category);
                if (selectedImage) {
                    const displayedImage = document.getElementById('displayed-image');
                    displayedImage.src = selectedImage;
                    displayedImage.style.display = 'block';
                    displayedImage.style.width = '400px'; // Adjust the width as needed
                    displayedImage.style.height = '400px'; // Adjust the height as needed
                    displayedImage.style.margin = '0 auto'; // Center the image horizontally
                    displayedImage.style.marginTop = '50px'; // Adjust the top margin as needed

                    // Store the displayed image in the array
                    storedImages.push(selectedImage);
                    saveStoredImages(); // Save the stored images to localStorage
                } else {
                    document.getElementById('displayed-image').src = '';
                }
            }, 2000); // Adjust the time to match your desired delay
        }

        // Function to start the button cooldown
        function startCooldown() {
            if (!buttonCooldown) {
                document.getElementById('show-image-button').disabled = true;
                buttonCooldown = true;
                setTimeout(() => {
                    document.getElementById('show-image-button').disabled = false;
                    buttonCooldown = false;
                }, 3000); // 3-second cooldown
                showRandomImage();
            }
        }

        // Function to view stored images
        function viewImages() {
            // Store the storedImages array in localStorage
            localStorage.setItem('storedImages', JSON.stringify(storedImages));
            window.open('fc24club.html', '_blank');
        }
    </script>
</body>
</html>
