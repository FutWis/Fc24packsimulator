<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FC24 Pack Opener</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <h1>Pack Opener</h1>
    <button id="show-image-button">Open Pack</button>
    <div id="image-container">
        <img id="displayed-image" src="" alt="Image will appear here">
    </div>

    <script>
        // Define image categories and their rarity percentages
        const imageCategories = [
            { category: 'Common Gold', rarity: 80 },
            { category: 'Rare Gold', rarity: 13 },
            { category: 'Nike Ready', rarity: 6.7 },
            { category: 'Icon', rarity: 0.3 }
        ];

        // Define a mapping of category names to arrays of file paths
        const categoryFilePaths = {
            'Common Gold': ['Cards/Golds/Neymar.png', ],
            'Rare Gold': ['Cards/Golds/Mbappe.png', 'Cards/Golds/Rodri.png', 'Cards/Golds/Kane.png'],
            'Nike Ready': ['Cards/Nike Ready/Alexia.jpeg', 'Cards/Nike Ready/Chiesa.jpeg', 'Cards/Nike Ready/Enzo.jpeg', 'Cards/Nike Ready/ Kerr.jpeg', 'Cards/Nike Ready/VVD.jpeg'],
            'Icon': ['Cards/Icons/R9.png']
        };

        // Function to select a random category based on rarity percentages
        function selectRandomCategory() {
            const rand = Math.random() * 100;
            let cumulativeProbability = 0;
            
            for (const category of imageCategories) {
                cumulativeProbability += category.rarity;
                if (rand <= cumulativeProbability) {
                    return category;
                }
            }
        }

        // Function to select a random image from the selected category
        function selectRandomImage(category) {
            const images = categoryFilePaths[category];
            if (images && images.length > 0) {
                const randomIndex = Math.floor(Math.random() * images.length);
                return images[randomIndex];
            }
            return null;
        }

        // Function to display a random image from the selected category
        function showRandomImage() {
            // Hide the card immediately
            document.getElementById('displayed-image').style.display = 'none';

            // Create and append confetti elements
            const confettiCount = 50; // Adjust the number of confetti particles as needed
            const imageContainer = document.getElementById('image-container');
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                const randomX = Math.random() * imageContainer.offsetWidth;
                const randomY = Math.random() * imageContainer.offsetHeight;
                confetti.style.left = `${randomX}px`;
                confetti.style.top = `${randomY}px`;
                imageContainer.appendChild(confetti);
            }

            // Remove confetti elements after the animation completes
            setTimeout(() => {
                const confettiElements = document.querySelectorAll('.confetti');
                confettiElements.forEach((confetti) => {
                    confetti.remove();
                });

                // After the confetti animation, display the card after 2 seconds
                setTimeout(() => {
                    const selectedCategory = selectRandomCategory();
                    const selectedImage = selectRandomImage(selectedCategory.category);
                    if (selectedImage) {
                        const displayedImage = document.getElementById('displayed-image');
                        displayedImage.src = selectedImage;
                        displayedImage.style.display = 'block';
                        displayedImage.style.width = '400px'; // Adjust the width as needed
                        displayedImage.style.height = '400px'; // Adjust the height as needed
                        displayedImage.style.margin = '0 auto'; // Center the image horizontally
                        displayedImage.style.marginTop = '50px'; // Adjust the top margin as needed
                    } else {
                        document.getElementById('displayed-image').src = '';
                    }
                }, 1000); // Adjust the time to match your desired delay
            }, 2000); // Adjust the time to match your confetti animation duration
        }

        // Add click event listener to the button
        document.getElementById('show-image-button').addEventListener('click', showRandomImage);
    </script>
</body>
</html>
